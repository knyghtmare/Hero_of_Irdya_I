[scenario]
    id = 15_Battle_for_Verdanyn
    name = _ "Battle for Verdanyn"

    victory_when_enemies_defeated = no

    {SCENARIO_MAP_DATA 1 15_Battle_for_Verdanyn}
    {NEXT_SCENARIO 15x_Aftermath}

    {TURNS 39 37 35}

    # defining a custom schedule
    {DEFAULT_SCHEDULE_CLOUD_SET}
    
    {DEFAULT_MUSIC_PLAYLIST}

    {STORY_TEXT_SCENARIO_15}

    [side]
        side=1
        {CHARACTER_STATS_JAHIN}
        canrecruit=yes
        controller=human
        {FLAG_VARIANT loyalist}
        team_name="good"
        fog=no
        user_team_name= _ "Alliance"
        {GOLD 380 350 320}
        {INCOME 3 2 1}
    [/side]

    {STARTING_VILLAGES 1 6}
    
    # Vampire Sides

    [side]
        side = 2
        id = Vampire_Duchess
        name = _ "Lady Phaelyn"
        type = Duchess
        canrecruit = yes
        controller = ai
        {FLAG_VARIANT long}
        team_name = "vampires"
        user_team_name = _ "Vampires"

        {GOLD 800 960 1100}
        {INCOME 38 48 58}

        recruit = "Sangel, Sword Dancer, Flesh Artisan, Sire, Mistress, Twilight Walker, Day Hunter, Blood Hulk"
        [ai]
            {AI_SIMPLE_ALWAYS_ASPECT grouping offensive}
            {AI_SIMPLE_ALWAYS_ASPECT aggression 0.77}
            {AI_SIMPLE_ALWAYS_ASPECT caution 0.34}
        [/ai]
    [/side]

    {STARTING_VILLAGES 2 20}

    [side]
        side = 3
        id = Vampire_Leader1
        generic_name = yes
        type = Sire
        canrecruit = yes
        controller = ai
        {FLAG_VARIANT long}
        team_name = "vampires"
        user_team_name = _ "Vampires"

        {GOLD 720 840 960}
        {INCOME 38 48 58}

        recruit = "Blood Manipulator, Blood Hulk, Vampire Duelist, Vampire Noble, Half Blood, Flesh Artisan"
        [ai]
            {AI_SIMPLE_ALWAYS_ASPECT grouping offensive}
            {AI_SIMPLE_ALWAYS_ASPECT aggression 0.77}
            {AI_SIMPLE_ALWAYS_ASPECT caution 0.34}
        [/ai]
    [/side]

    {STARTING_VILLAGES 3 6}

    [side]
        side = 4
        id = Vampire_Leader2
        generic_name = yes
        type = Mistress
        canrecruit = yes
        controller = ai
        {FLAG_VARIANT long}
        team_name = "vampires"
        user_team_name = _ "Vampires"

        {GOLD 720 840 960}
        {INCOME 38 48 58}

        recruit = "Blood Manipulator, Blood Hulk, Vampire Duelist, Vampire Noble, Half Blood, Flesh Artisan"
        [ai]
            {AI_SIMPLE_ALWAYS_ASPECT grouping offensive}
            {AI_SIMPLE_ALWAYS_ASPECT aggression 0.77}
            {AI_SIMPLE_ALWAYS_ASPECT caution 0.34}
        [/ai]
    [/side]

    {STARTING_VILLAGES 4 6}

    [side]
        side = 5
        id = Vampire_Leader3
        generic_name = yes
        type = Twilight Walker
        canrecruit = yes
        controller = ai
        {FLAG_VARIANT long}
        team_name = "vampires"
        user_team_name = _ "Vampires"

        {GOLD 720 840 960}
        {INCOME 38 48 58}

        recruit = "Blood Manipulator, Blood Hulk, Vampire Duelist, Vampire Noble, Half Blood, Flesh Artisan"
        [ai]
            {AI_SIMPLE_ALWAYS_ASPECT grouping offensive}
            {AI_SIMPLE_ALWAYS_ASPECT aggression 0.77}
            {AI_SIMPLE_ALWAYS_ASPECT caution 0.34}
        [/ai]
    [/side]

    {STARTING_VILLAGES 5 6}

    [side]
        side = 6
        id = Vampire_Leader4
        generic_name = yes
        type = Sangel
        canrecruit = yes
        controller = ai
        {FLAG_VARIANT long}
        team_name = "vampires"
        user_team_name = _ "Vampires"

        {GOLD 720 840 960}
        {INCOME 38 48 58}

        recruit = "Blood Manipulator, Blood Hulk, Vampire Duelist, Vampire Noble, Half Blood, Flesh Artisan"
        [ai]
            {AI_SIMPLE_ALWAYS_ASPECT grouping offensive}
            {AI_SIMPLE_ALWAYS_ASPECT aggression 0.77}
            {AI_SIMPLE_ALWAYS_ASPECT caution 0.34}
        [/ai]
    [/side]

    {STARTING_VILLAGES 6 6}

    # Allied Sides

    [side]
        side = 7
        canrecruit = yes
        controller = ai

        {FLAG_VARIANT loyalist}
        team_name = "good"
        user_team_name = _ "Drakes"

        id="Kerath"
        name= _ "Kerath Mah Toa"
        type="Drake Enforcer"

        {GOLD 500 480 450}
        {INCOME 48 38 38}

        recruit = "Drake Warrior, Fire Drake, Drake Arbiter, Drake Thrasher, Saurian Ambusher, Saurian Soothsayer"
        [ai]
            {AI_SIMPLE_ALWAYS_ASPECT grouping offensive}
            {AI_SIMPLE_ALWAYS_ASPECT aggression 0.77}
            {AI_SIMPLE_ALWAYS_ASPECT caution 0.34}
        [/ai]
    [/side]

    {STARTING_VILLAGES 7 6}

    [side]
        side = 8
        id = "Radoc"
        name = _ "Prince Radoc"
        type = "Minotaur Overlord"
        canrecruit = yes
        controller = ai
        team_name="good"
        user_team_name= _ "Minotaurs"

        {FLAG_VARIANT long}
        {GOLD 500 480 450}
        {INCOME 48 38 38}

        recruit = "Minotaur Rouser, Minotaur Mystic, Minotaur Slayer, Minotaur Warlock, Minotaur Savage, Minotaur Ancient Behemoth, Boar Knight, Gnoll Marksman"
        [ai]
            {AI_SIMPLE_ALWAYS_ASPECT grouping offensive}
            {AI_SIMPLE_ALWAYS_ASPECT aggression 0.77}
            {AI_SIMPLE_ALWAYS_ASPECT caution 0.34}
        [/ai]
    [/side]

    {STARTING_VILLAGES 8 6}

    [side]
        side = 9
        id = "Tuug"
        name = _ "Great Chief Tuug"
        type = "Troll Warmonger"
        canrecruit = yes
        controller = ai

        team_name="good"
        user_team_name= _ "Trolls"

        {FLAG_VARIANT long}
        {GOLD 500 480 450}
        {INCOME 48 38 38}

        recruit = "Troll Warrior, Troll, Troll Rocklobber, Troll Boulderlobber, Troll Shaman"
        [ai]
            {AI_SIMPLE_ALWAYS_ASPECT grouping offensive}
            {AI_SIMPLE_ALWAYS_ASPECT aggression 0.77}
            {AI_SIMPLE_ALWAYS_ASPECT caution 0.34}
        [/ai]
    [/side]

    {STARTING_VILLAGES 9 8}

    # Orcs

    [side]
        side = 10
        team_name = "orcs"
        user_team_name = _ "Northern Orcs"
        {FLAG_VARIANT ragged}
        color = rust

        type = "Orcish Overlord"
        id = "Orc_Chieftain"
        generic_name = yes
        canrecruit = yes
        controller = ai
        x,y = 3,22

        {GOLD 700 880 1050}
        {INCOME 38 38 38}

        recruit = "Orcish Warlord, Orcish Slurbow, Orcish Terror, Orcish Elite Warrior, Orcish Nightblade, Orcish Sorcerer, Direwolf Rider"
        [ai]
            {AI_SIMPLE_ALWAYS_ASPECT grouping offensive}
            {AI_SIMPLE_ALWAYS_ASPECT aggression 0.77}
            {AI_SIMPLE_ALWAYS_ASPECT caution 0.34}
        [/ai]
    [/side]

    {STARTING_VILLAGES 10 6}

    [side]
        side = 11
        team_name = "orcs"
        user_team_name = _ "Northern Orcs"
        {FLAG_VARIANT ragged}

        type = "Orcish Warlord"
        id = "Orc_Leader1"
        max_moves=1
        color = yellow
        generic_name = yes
        canrecruit = yes
        controller = ai
        x,y = 3,12

        {GOLD 500 580 650}
        {INCOME 38 38 38}

        recruit = "Orcish Warrior, Orcish Crossbowman, Goblin Knight, Orcish Raider"
        [ai]
            {AI_SIMPLE_ALWAYS_ASPECT grouping offensive}
            {AI_SIMPLE_ALWAYS_ASPECT aggression 0.77}
            {AI_SIMPLE_ALWAYS_ASPECT caution 0.34}
        [/ai]
    [/side]

    {STARTING_VILLAGES 11 6}

    [side]
        side = 12
        team_name = "orcs"
        user_team_name = _ "Northern Orcs"
        {FLAG_VARIANT ragged}
        color = pink

        type = "Orcish Warlord"
        id = "Orc_Leader2"
        max_moves=1
        generic_name = yes
        canrecruit = yes
        controller = ai
        x,y = 7,11

        {GOLD 500 580 650}
        {INCOME 38 38 38}

        recruit = "Orcish Warrior, Orcish Crossbowman, Goblin Knight, Orcish Raider"
        [ai]
            {AI_SIMPLE_ALWAYS_ASPECT grouping offensive}
            {AI_SIMPLE_ALWAYS_ASPECT aggression 0.77}
            {AI_SIMPLE_ALWAYS_ASPECT caution 0.34}
        [/ai]
    [/side]

    {STARTING_VILLAGES 12 6}

    # Southern Elves & Demons

    [side]
        side = 13
        team_name = "elves"
        user_team_name = _ "Southerners"
        {FLAG_VARIANT long}
        color = khaki

        type = "Southern Chieftain"
        id = "Elf_Leader1"
        generic_name = yes
        canrecruit = yes
        controller = ai
        x,y = 3,64

        {GOLD 500 580 650}
        {INCOME 38 38 38}

        recruit = "Southern Warrior, Southern Marksman, Sun Priestess, Moon Cleric, Empyrean Druid, Southern Protector, Demon Grunt, Demon Zephyr"
        [ai]
            {AI_SIMPLE_ALWAYS_ASPECT grouping offensive}
            {AI_SIMPLE_ALWAYS_ASPECT aggression 0.77}
            {AI_SIMPLE_ALWAYS_ASPECT caution 0.34}
        [/ai]
    [/side]

    [side]
        side = 14
        team_name = "elves"
        user_team_name = _ "Demons"
        {FLAG_VARIANT long}
        color = dark_purple

        type = "Lumeril Guard"
        id = "Demon_Leader1"
        generic_name = yes
        canrecruit = yes
        controller = ai
        x,y = 9,64

        {GOLD 700 880 1050}
        {INCOME 38 38 38}

        recruit = "Demon Warrior, Demon Zephyr, Demon Spelldancer, Demon Stormtide, Lumeril Guard"
        [ai]
            {AI_SIMPLE_ALWAYS_ASPECT grouping offensive}
            {AI_SIMPLE_ALWAYS_ASPECT aggression 0.77}
            {AI_SIMPLE_ALWAYS_ASPECT caution 0.34}
        [/ai]
    [/side]

    # Dark Elementalist faction

    [side]
        side = 15
        team_name = "evil"
        user_team_name = _ "Undead"
        {FLAG_VARIANT undead}
        color = orchid

        id = "Undead_Lord"
        generic_name = yes
        type = "Elder Lich Lord"
        canrecruit = yes
        controller = ai
        x,y = 43,64

        {GOLD 700 880 1050}
        {INCOME 38 48 58}

        recruit = "Shadowback, Spectre, Draug, Banebow, Death Knight"

        [ai]
            {AI_SIMPLE_ALWAYS_ASPECT grouping offensive}
            {AI_SIMPLE_ALWAYS_ASPECT aggression 0.77}
            {AI_SIMPLE_ALWAYS_ASPECT caution 0.34}
        [/ai]
    [/side]

    {LIMIT_CONTEMPORANEOUS_RECRUITS 15 "Spectre" 2}
    {LIMIT_CONTEMPORANEOUS_RECRUITS 15 "Shadowback" 2}

    [side]
        side = 16
        team_name = "evil"
        user_team_name = _ "Elementals"
        {FLAG_VARIANT undead}
        color = medium_orchid

        id = "Undead_Leader1"
        generic_name = yes
        type = "Lich Lord"
        canrecruit = yes
        controller = ai
        x,y = 52,60

        {GOLD 600 750 900}
        {INCOME 38 38 38}

        recruit = "Furnace Beast, Fire Wisp, Stone Golem, Vine Tiger, Zephyr, Thunderbird"

        [ai]
            {AI_SIMPLE_ALWAYS_ASPECT grouping offensive}
            {AI_SIMPLE_ALWAYS_ASPECT aggression 0.77}
            {AI_SIMPLE_ALWAYS_ASPECT caution 0.34}
        [/ai]
    [/side]

    {LIMIT_CONTEMPORANEOUS_RECRUITS 16 "Fire Wisp" 3}
    {LIMIT_CONTEMPORANEOUS_RECRUITS 16 "Thunderbird" 3}
    {LIMIT_CONTEMPORANEOUS_RECRUITS 16 "Stone Golem" 3}

    [side]
        side = 17
        team_name = "evil"
        user_team_name = _ "Nightmares"
        {FLAG_VARIANT undead}
        color = steel_blue

        id = "Undead_Leader2"
        generic_name = yes
        type = "Lich Lord"
        canrecruit = yes
        controller = ai
        x,y = 58,60

        {GOLD 600 750 900}
        {INCOME 38 38 38}

        recruit = "Angry One, Spiteful Watcher, Jinx Beast, Rash One, Cloud of Gloom, Soul Snatcher"

        [ai]
            {AI_SIMPLE_ALWAYS_ASPECT grouping offensive}
            {AI_SIMPLE_ALWAYS_ASPECT aggression 0.77}
            {AI_SIMPLE_ALWAYS_ASPECT caution 0.34}
        [/ai]
    [/side]

    # Vampire Guardian Side

    [side]
        side = 18
        no_leader = yes
        hidden = yes
        color = vivid_blue
        controller = ai
        team_name = "vampires"
        {FLAG_VARIANT long}
        {NO_ECONOMY}

        # keep

        {GENERIC_UNIT 18 "Methusalem" 31 39}{GUARDIAN}
        {GENERIC_UNIT 18 "Methusalem" 33 39}{GUARDIAN}
        {GENERIC_UNIT 18 "Methusalem" 31 42}{GUARDIAN}
        {GENERIC_UNIT 18 "Methusalem" 33 42}{GUARDIAN}
        {GENERIC_UNIT 18 "Methusalem" 34 40}{GUARDIAN}
        {GENERIC_UNIT 18 "Methusalem" 30 40}{GUARDIAN}

        # inner wall

        {GENERIC_UNIT 18 "Sword Dancer" 21 31}{GUARDIAN}
        {GENERIC_UNIT 18 "Sire" 23 30}{GUARDIAN}
        {GENERIC_UNIT 18 "Mistress" 30 28}{GUARDIAN}
        {GENERIC_UNIT 18 "Sangel" 33 29}{GUARDIAN}
        {GENERIC_UNIT 18 "Twilight Walker" 17 48}{GUARDIAN}
        {GENERIC_UNIT 18 "Day Hunter" 17 47}{GUARDIAN}

        {GENERIC_UNIT 18 "Sword Dancer" 18 45}{GUARDIAN}
        {GENERIC_UNIT 18 "Sire" 19 45}{GUARDIAN}
        {GENERIC_UNIT 18 "Mistress" 23 50}{GUARDIAN}
        {GENERIC_UNIT 18 "Sangel" 21 50}{GUARDIAN}
        {GENERIC_UNIT 18 "Twilight Walker" 36 49}{GUARDIAN}
        {GENERIC_UNIT 18 "Day Hunter" 40 47}{GUARDIAN}

        {GENERIC_UNIT 18 "Sword Dancer" 41 49}{GUARDIAN}
        {GENERIC_UNIT 18 "Sire" 23 45}{GUARDIAN}
        {GENERIC_UNIT 18 "Mistress" 25 47}{GUARDIAN}
        {GENERIC_UNIT 18 "Sangel" 28 47}{GUARDIAN}
        {GENERIC_UNIT 18 "Twilight Walker" 30 47}{GUARDIAN}
        {GENERIC_UNIT 18 "Day Hunter" 33 47}{GUARDIAN}

        {GENERIC_UNIT 18 "Sword Dancer" 36 46}{GUARDIAN}
        {GENERIC_UNIT 18 "Sire" 39 45}{GUARDIAN}
        {GENERIC_UNIT 18 "Mistress" 39 43}{GUARDIAN}
        {GENERIC_UNIT 18 "Sangel" 39 42}{GUARDIAN}
        {GENERIC_UNIT 18 "Twilight Walker" 39 40}{GUARDIAN}
        {GENERIC_UNIT 18 "Day Hunter" 38 37}{GUARDIAN}

        {GENERIC_UNIT 18 "Sword Dancer" 37 35}{GUARDIAN}
        {GENERIC_UNIT 18 "Sire" 31 35}{GUARDIAN}
        {GENERIC_UNIT 18 "Mistress" 29 34}{GUARDIAN}
        {GENERIC_UNIT 18 "Sangel" 26 34}{GUARDIAN}
        {GENERIC_UNIT 18 "Twilight Walker" 24 35}{GUARDIAN}
        {GENERIC_UNIT 18 "Day Hunter" 25 38}{GUARDIAN}
        {GENERIC_UNIT 18 "Mistress" 24 40}{GUARDIAN}

        # black castle guards

        {GENERIC_UNIT 18 "Sangel" 5 29}{GUARDIAN}
        {GENERIC_UNIT 18 "Sangel" 3 31}{GUARDIAN}
        {GENERIC_UNIT 18 "Sangel" 7 32}{GUARDIAN}
        {GENERIC_UNIT 18 "Sangel" 7 31}{GUARDIAN}
        {GENERIC_UNIT 18 "Sangel" 19 28}{GUARDIAN}
        {GENERIC_UNIT 18 "Sangel" 20 27}{GUARDIAN}

        {GENERIC_UNIT 18 "Sangel" 17 36}{GUARDIAN}
        {GENERIC_UNIT 18 "Sangel" 19 39}{GUARDIAN}
        {GENERIC_UNIT 18 "Sangel" 15 43}{GUARDIAN}
        {GENERIC_UNIT 18 "Sangel" 12 48}{GUARDIAN}
        {GENERIC_UNIT 18 "Sangel" 39 28}{GUARDIAN}
        {GENERIC_UNIT 18 "Sangel" 40 28}{GUARDIAN}

        {GENERIC_UNIT 18 "Sangel" 33 25}{GUARDIAN}
        {GENERIC_UNIT 18 "Sangel" 34 25}{GUARDIAN}
        {GENERIC_UNIT 18 "Sangel" 29 25}{GUARDIAN}

        # outer wall

        {GENERIC_UNIT 18 "Vampire Noble" 22 19}{GUARDIAN}
        {GENERIC_UNIT 18 "Vampire Duelist" 24 17}{GUARDIAN}
        {GENERIC_UNIT 18 "Blood Manipulator" 27 16}{GUARDIAN}
        {GENERIC_UNIT 18 "Flesh Artisan" 29 15}{GUARDIAN}
        {GENERIC_UNIT 18 "Blood Hulk" 33 15}{GUARDIAN}
        {GENERIC_UNIT 18 "Half Blood" 35 17}{GUARDIAN}
        {GENERIC_UNIT 18 "Vampire Noble" 38 17}{GUARDIAN}

        {GENERIC_UNIT 18 "Vampire Noble" 40 18}{GUARDIAN}
        {GENERIC_UNIT 18 "Vampire Duelist" 42 21}{GUARDIAN}
        {GENERIC_UNIT 18 "Blood Manipulator" 43 23}{GUARDIAN}
        {GENERIC_UNIT 18 "Flesh Artisan" 43 26}{GUARDIAN}
        {GENERIC_UNIT 18 "Blood Hulk" 43 29}{GUARDIAN}
        {GENERIC_UNIT 18 "Half Blood" 42 32}{GUARDIAN}
        {GENERIC_UNIT 18 "Vampire Noble" 43 35}{GUARDIAN}

        {GENERIC_UNIT 18 "Vampire Noble" 43 40}{GUARDIAN}
        {GENERIC_UNIT 18 "Vampire Duelist" 43 43}{GUARDIAN}
        {GENERIC_UNIT 18 "Blood Manipulator" 46 45}{GUARDIAN}
        {GENERIC_UNIT 18 "Flesh Artisan" 47 49}{GUARDIAN}
        {GENERIC_UNIT 18 "Blood Hulk" 46 51}{GUARDIAN}
        {GENERIC_UNIT 18 "Half Blood" 44 54}{GUARDIAN}
        {GENERIC_UNIT 18 "Vampire Noble" 30 53}{GUARDIAN}

        {GENERIC_UNIT 18 "Vampire Noble" 26 54}{GUARDIAN}
        {GENERIC_UNIT 18 "Vampire Duelist" 22 55}{GUARDIAN}
        {GENERIC_UNIT 18 "Blood Manipulator" 19 56}{GUARDIAN}
        {GENERIC_UNIT 18 "Flesh Artisan" 16 57}{GUARDIAN}
        {GENERIC_UNIT 18 "Blood Hulk" 12 28}{GUARDIAN}
        {GENERIC_UNIT 18 "Half Blood" 10 56}{GUARDIAN}
        {GENERIC_UNIT 18 "Vampire Noble" 6 56}{GUARDIAN}

        {GENERIC_UNIT 18 "Vampire Noble" 5 56}{GUARDIAN}
        {GENERIC_UNIT 18 "Vampire Duelist" 4 52}{GUARDIAN}
        {GENERIC_UNIT 18 "Blood Manipulator" 7 50}{GUARDIAN}
        {GENERIC_UNIT 18 "Flesh Artisan" 9 49}{GUARDIAN}
        {GENERIC_UNIT 18 "Blood Hulk" 10 46}{GUARDIAN}
        {GENERIC_UNIT 18 "Half Blood" 8 45}{GUARDIAN}
        {GENERIC_UNIT 18 "Vampire Noble" 5 43}{GUARDIAN}

        {GENERIC_UNIT 18 "Vampire Noble" 2 40}{GUARDIAN}
        {GENERIC_UNIT 18 "Vampire Duelist" 5 38}{GUARDIAN}
        {GENERIC_UNIT 18 "Blood Manipulator" 6 35}{GUARDIAN}
        {GENERIC_UNIT 18 "Flesh Artisan" 7 35}{GUARDIAN}
        {GENERIC_UNIT 18 "Blood Hulk" 10 33}{GUARDIAN}
        {GENERIC_UNIT 18 "Half Blood" 11 31}{GUARDIAN}
        {GENERIC_UNIT 18 "Vampire Noble" 11 29}{GUARDIAN}

        {GENERIC_UNIT 18 "Vampire Noble" 12 58}{GUARDIAN}
        {GENERIC_UNIT 18 "Vampire Duelist" 11 27}{GUARDIAN}
        {GENERIC_UNIT 18 "Blood Manipulator" 11 24}{GUARDIAN}
        {GENERIC_UNIT 18 "Flesh Artisan" 12 22}{GUARDIAN}
        {GENERIC_UNIT 18 "Blood Hulk" 13 22}{GUARDIAN}
        {GENERIC_UNIT 18 "Half Blood" 15 21}{GUARDIAN}
        {GENERIC_UNIT 18 "Vampire Noble" 16 20}{GUARDIAN}
    [/side]

    # Alliance Soldiers Side

    [side]
        side = 19
        no_leader = yes
        controller = ai
        {FLAG_VARIANT long}
        color = dodger_blue
        team_name = "good"
        hidden = yes
        {NO_ECONOMY}

        # alliance soldiers

        {GENERIC_UNIT 19 "Drake Enforcer" 31 6}
        {GENERIC_UNIT 19 "Drake Arbiter" 31 6}
        {GENERIC_UNIT 19 "Minotaur Savage" 31 6}
        {GENERIC_UNIT 19 "Dwarvish Lord" 31 6}
        {GENERIC_UNIT 19 "Saurian Ambusher" 31 6}
        {GENERIC_UNIT 19 "Dwarvish Runemaster" 31 6}
        {GENERIC_UNIT 19 "Troll Rocklobber" 31 6}

        {GENERIC_UNIT 19 "Drake Thrasher" 40 8}
        {GENERIC_UNIT 19 "Drake Arbiter" 40 8}
        {GENERIC_UNIT 19 "Minotaur Savage" 40 8}
        {GENERIC_UNIT 19 "Minotaur Mystic" 40 8}
        {GENERIC_UNIT 19 "Gryphon Master" 40 8}
        {GENERIC_UNIT 19 "Troll Warrior" 40 8}
        {GENERIC_UNIT 19 "Troll Rocklobber" 40 8}

        {GENERIC_UNIT 19 "Drake Thrasher" 48 2}
        {GENERIC_UNIT 19 "Drake Arbiter" 48 2}
        {GENERIC_UNIT 19 "Minotaur Savage" 48 2}
        {GENERIC_UNIT 19 "Minotaur Mystic" 48 2}
        {GENERIC_UNIT 19 "Gryphon Master" 48 2}
        {GENERIC_UNIT 19 "Dwarvish Pathfinder" 48 2}
        {GENERIC_UNIT 19 "Troll Rocklobber" 48 2}

        {GENERIC_UNIT 19 "Drake Thrasher" 51 11}
        {GENERIC_UNIT 19 "Drake Arbiter" 51 11}
        {GENERIC_UNIT 19 "Minotaur Savage" 51 11}
        {GENERIC_UNIT 19 "Minotaur Mystic" 51 11}
        {GENERIC_UNIT 19 "Saurian Ambusher" 51 11}
        {GENERIC_UNIT 19 "Dwarvish Pathfinder" 51 11}
        {GENERIC_UNIT 19 "Troll Rocklobber" 51 11}

        {GENERIC_UNIT 19 "Drake Thrasher" 45 9}
        {GENERIC_UNIT 19 "Drake Arbiter" 45 9}
        {GENERIC_UNIT 19 "Minotaur Savage" 45 9}
        {GENERIC_UNIT 19 "Minotaur Mystic" 45 9}
        {GENERIC_UNIT 19 "Saurian Ambusher" 45 9}
        {GENERIC_UNIT 19 "Troll Warrior" 45 9}
        {GENERIC_UNIT 19 "Troll Rocklobber" 45 9}

        {GENERIC_UNIT 19 "Drake Thrasher" 59 2}
        {GENERIC_UNIT 19 "Drake Arbiter" 59 2}
        {GENERIC_UNIT 19 "Minotaur Savage" 59 2}
        {GENERIC_UNIT 19 "Minotaur Mystic" 59 2}
        {GENERIC_UNIT 19 "Saurian Ambusher" 59 2}
        {GENERIC_UNIT 19 "Dwarvish Pathfinder" 59 2}
        {GENERIC_UNIT 19 "Troll Rocklobber" 59 2}

        {GENERIC_UNIT 19 "Drake Thrasher" 56 6}
        {GENERIC_UNIT 19 "Drake Arbiter" 56 6}
        {GENERIC_UNIT 19 "Minotaur Savage" 56 6}
        {GENERIC_UNIT 19 "Minotaur Mystic" 56 6}
        {GENERIC_UNIT 19 "Saurian Ambusher" 56 6}
        {GENERIC_UNIT 19 "Dwarvish Pathfinder" 56 6}
        {GENERIC_UNIT 19 "Troll Rocklobber" 56 6}

        {GENERIC_UNIT 19 "Drake Thrasher" 56 14}
        {GENERIC_UNIT 19 "Drake Arbiter" 56 14}
        {GENERIC_UNIT 19 "Minotaur Savage" 56 14}
        {GENERIC_UNIT 19 "Minotaur Mystic" 56 14}
        {GENERIC_UNIT 19 "Saurian Ambusher" 56 14}
        {GENERIC_UNIT 19 "Dwarvish Pathfinder" 56 14}
        {GENERIC_UNIT 19 "Troll Rocklobber" 56 14}

        {GENERIC_UNIT 19 "Drake Thrasher" 52 17}
        {GENERIC_UNIT 19 "Drake Arbiter" 52 17}
        {GENERIC_UNIT 19 "Minotaur Savage" 52 17}
        {GENERIC_UNIT 19 "Minotaur Mystic" 52 17}
        {GENERIC_UNIT 19 "Saurian Ambusher" 52 17}
        {GENERIC_UNIT 19 "Dwarvish Pathfinder" 52 17}
        {GENERIC_UNIT 19 "Troll Rocklobber" 52 17}

        {GENERIC_UNIT 19 "Drake Thrasher" 57 24}
        {GENERIC_UNIT 19 "Drake Arbiter" 57 24}
        {GENERIC_UNIT 19 "Minotaur Savage" 57 24}
        {GENERIC_UNIT 19 "Minotaur Mystic" 57 24}
        {GENERIC_UNIT 19 "Saurian Ambusher" 57 24}
        {GENERIC_UNIT 19 "Dwarvish Pathfinder" 57 24}
        {GENERIC_UNIT 19 "Troll Rocklobber" 57 24}

        {GENERIC_UNIT 19 "Drake Thrasher" 9 2}
        {GENERIC_UNIT 19 "Drake Arbiter" 9 2}
        {GENERIC_UNIT 19 "Minotaur Savage" 9 2}
        {GENERIC_UNIT 19 "Minotaur Mystic" 9 2}
        {GENERIC_UNIT 19 "Gryphon Master" 9 2}
        {GENERIC_UNIT 19 "Dwarvish Pathfinder" 9 2}
        {GENERIC_UNIT 19 "Troll Rocklobber" 9 2}
    [/side]

    [event]
        name = "prestart"

        [allow_recruit]
            side = 1
            type = "Infantryman, Longbowman, Shock Trooper, Pikeman"
        [/allow_recruit]

        [unit]
            {CHARACTER_STATS_ABRAR}
            x,y = 41, 4
            # type = "Shock Trooper"
            experience = 21
        [/unit]

        [objectives]
            side = 1
            silent = no
            [objective]
                description = _ "Defeat all enemy leaders"
                condition = win
            [/objective]
            # [objective]
            #    description = _ "Move Jahin to the Keep of Verdanyn (32,40)"
            #    controller = win
            # [/objective]
            [objective]
                description = _ "Death of Jahin"
                condition = lose
            [/objective]
            [objective]
                description = _ "Death of any allied leader"
                condition = lose
            [/objective]
            [objective]
                description = _ "Death of any hero unit"
                condition = lose
            [/objective]
            {TURNS_RUN_OUT}
        [/objectives]

        # {SET_VARIABLE keep_captured no}
        # {SET_VARIABLE enemies_defeated no}

        [recall]
            id = "Meherab"
        [/recall]
        [recall]
            id = "Krog"
        [/recall]
        [recall]
            upkeep = loyal
        [/recall]
        [recall]
            upkeep = loyal
        [/recall]

        # micro AI code

        [micro_ai]
            side=7
            ai_type=healer_support
            action=add
            [filter]
                type="Saurian Soothsayer"
            [/filter]
            aggression=0.10
        [/micro_ai]

        [micro_ai]
            side=8
            ai_type=healer_support
            action=add
            [filter]
                type="Minotaur Mystic"
            [/filter]
            aggression=0.10
        [/micro_ai]

        [micro_ai]
            side=13
            ai_type=healer_support
            action=add
            [filter]
                type="Empyrean Druid"
            [/filter]
            aggression=0.10
        [/micro_ai]

        [micro_ai]
            side=19
            ai_type=healer_support
            action=add
            [filter]
                type="Minotaur Mystic"
            [/filter]
            aggression=0.10
        [/micro_ai]
    [/event]

    {SET_LABEL 32 40 ( _ "Keep of Verdanyn")}

    #[event]
    #    name = "moveto"
    #    first_time_only = yes
    #    [filter]
    #        id = "Jahin"
    #        x,y = 32,40
    #    [/filter]
    #    [if]
    #        {VARIABLE_CONDITIONAL keep_captured equals no}
    #        [then]
    #            {SET_VARIABLE keep_captured yes}
    #            {SIMPLE_MESSAGE "Jahin" ( _ "We have captured the keep! Friends and allies, have heart for we have almost reigned victorious!")}
    #        [/then]
    #    [/if]
    #[/event]

    [event]
        name = "enemies defeated"

        #[if]
        #    {VARIABLE_CONDITIONAL keep_captured equals yes}
        #    [then]
        #        {SIMPLE_MESSAGE "Jahin" ( _ "It has finally ended. We have triumphed!")}
        #        
        #        [endlevel]
        #            result = victory
        #        [/endlevel]
        #    [/then]
        #    [else]
        #        {SIMPLE_MESSAGE "Jahin" ( _ "We have to capture the keep to assert our victory!")}
        #    [/else]
        #[/if]

        {SIMPLE_MESSAGE "Jahin" ( _ "It has finally ended. We have triumphed!")}
                
        [endlevel]
            result = victory
        [/endlevel]
    [/event]

    # capture

    [event]
        name = "capture"
        first_time_only = no

        [filter]
            [not]
                side = 1,2,3,4,5,6,7,8,9,18,19
            [/not]
            [filter_location]
                terrain = *^V*
            [/filter_location]
        [/filter]

        {PLAY_SOUND "torch.ogg"}
        {DELAY 200}
        {PLAY_SOUND "wose-die.ogg"}

        [terrain]
            x,y=$x1,$y1
            terrain=^Dr
            layer=overlay
        [/terrain]

        {REDRAW}
    [/event]

    # adding this on request from my friend
    [event]
        name="attack"
        first_time_only=yes
        [filter]
            id="Abrar"
        [/filter]

        {SIMPLE_MESSAGE "Abrar" ( _ "FOR PEANUTS!")}
    [/event]

    {MAIN_HERO_DEATH_EVENTS}
    {KOJAC_LOYAL_DEATH_EVENT}
    {LOYAL_UNIT_DEATH_EVENT}

[/scenario]